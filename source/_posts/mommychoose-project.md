---
title: 妈咪臻选小程序商城全栈开发
catalog: true
date: 2019-09-26 11:52:30
updated: 2019-09-26 11:52:30
subtitle:
cover:
categories:
- 技术
tags: 
- 小程序
- vuejs
- JavaScript
---

技术栈：

vuejs + node.js

<!--more--> 



# 框架选择
要考虑后续扩展，以及后台管理系统复用，选择使用mpvue。

# 平台选择
## 小程序云开发
云开发提供了云函数、数据库以及存储功能，这样似乎就可以不搭建后台后端服务器。但后来发现，云开发只提供了小程序的API。服务端API还是需要后台服务器去调用。论坛看到有说要提供JS API，但是没有时间点。所以如果仅此用于开发而不达后端服务器，没办法完成整个商城的功能。既然反正需要后端服务器，那就不在折腾云开发了。

## leancloud
leancloud提供了比较宽松的免费开发版本，觉得基本可以满足当前商城的使用情况。另外觉得他们家的文档写的比较好。
但是LeanCloud 中国版 10 月份会开始停止为不绑定自有域名的应用服务。绑定的域名当然还得备案。而现在LeanCloud停止了对开发版应用进行备案或者接入的支持，他们建议的方式包括到 IaaS 服务商处自行完成备案和接入（华北节点是和 UCloud 合作，华东节点是和腾讯云合作）。
之前了解过腾讯云的备案要求，要求购买到云服务器三个月以上。看了一下，UCloud没有购买时长的要求，觉得应该会便宜一些。所以选择了UCloud注册域名并备案。

除了数据库，还有大量的商品图片需要保存。LeanCloud 云端也支持「文件」类数据的存储。但是HTTPS 文件流量无免费的使用额度，而微信小程序强制要求使用https访问。所以需要考虑把图片存在其他的地方。而UCloud提供了对象存储的功能，可以满足该需求。

# 数据库设计
参考 [数据模型设计指南](https://leancloud.cn/docs/relation-guide.html)

需要这样几张表，即class。

- 用户
- 商品
- 分类
- 品牌。

其中品牌/分类和商品是一对多的关系。

每个商品需要包含如下的属性:
-   名称
-   价格
-   销量
-   收藏数
-   参数
-   详情
-   评论

