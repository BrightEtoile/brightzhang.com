<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          Python学习笔记 - Brighton Zhang
        
    </title>

    <link rel="canonical" href="https://brightonzhang.com/zh/2018/python-notes/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('/img/2018/2AIEQMwjaAihNME0.jpg')
            /*post*/
        
    }
    
</style>

<header class="intro-header">
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Python" title="Python">Python</a>
                            
                        </div>
                        <h1>Python学习笔记</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted on 07/10/2018
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Brighton Zhang</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    <li>
                        <a href="/archive/">Archives</a>
                    </li>

                    <li>
                        <a href="/tags/">Tags</a>
                    </li>

                    <li>
                        <a href="/about/">About</a>
                    </li>

                    <!-- Brighton, 3/10/2018, hardcoded the navbar elements order
                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    -->
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <p>本文为个人Python学习笔记，主要为帮助自己记录重点，也可作为其他语言（如C/C++）程序员学习Python的参考资料。</p>
<h1 id="入门">入门</h1>
<ul>
<li>Python语句无需分号结束。</li>
<li>注释以 ‘#’ 开始，直到该行结束。</li>
</ul>
<p>python代码示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># import modules used here -- sys is a very standard one</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gather our code in a main() function</span></span><br><span class="line"><span class="comment"># The def keyword defines the function with its parameters </span></span><br><span class="line"><span class="comment"># within parentheses and its code indented. </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Hello there'</span>, sys.argv[<span class="number">1</span>]</span><br><span class="line">    <span class="comment"># Command line args are in sys.argv[1], sys.argv[2] ...</span></span><br><span class="line">    <span class="comment"># sys.argv[0] is the script name itself and can be ignored</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Standard boilerplate to call the main() function to begin</span></span><br><span class="line"><span class="comment"># the program.</span></span><br><span class="line"><span class="comment"># When a Python file is run directly, the special variable </span></span><br><span class="line"><span class="comment"># "__name__" is set to "__main__". </span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>def用来定义函数。</li>
<li>如果直接运行Python文件，特殊变量<code>__name__</code>会被设置为 <code>__main__</code>。所以像上面一样，可以用<code>if __name__ ==…</code>来控制main()在直接运行时或被包含时是否执行。</li>
</ul>
<p>The outermost statements in a Python file, or “module”, do its one-time setup — those statements run from top to bottom the first time the module is imported somewhere, setting up its variables and functions.</p>
<h2 id="缩进">缩进</h2>
<p>Python的一个不寻常的特性是代码的空白缩进影响代码含义。一个代码逻辑块，如一个函数代码，应该有相同的缩进，与它的父函数或if语句或其他的缩进区分开来。由于不同平台或不同IDE上TABs可能有不同含义，所以建议避免在Python中使用TABs——在编辑器中设置空格替换TABs。至于说应该缩进多少个空格，Python官方建议是4个空格<a href="http://python.org/dev/peps/pep-0008/#indentation" target="_blank" rel="noopener">the official Python style guide (PEP 8)</a>。而Google的内部规范却是2个空格。</p>
<h2 id="模块与命名空间">模块与命名空间</h2>
<p>模块是最高级别的程序组成单元，它将程序代码和数据封装起来以便重用。模块往往对应Python程序文件。每一个文件都是一个模块，并且模块导入其他模块后可以使用导入模块定义的变量名。</p>
<p>每个模块都有他们自己的命名空间。</p>
<p>假如有个模块“<a href="http://pinky.py" target="_blank" rel="noopener">pinky.py</a>”包含“def foo()”，foo函数的完整名称是“binky.foo”。</p>
<h2 id="help-dir">help(), dir()</h2>
<p>Inside the Python interpreter, the help() function pulls up documentation strings for various modules, functions, and methods.</p>
<p>The dir() function tells you what the attributes of an object are.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">SWAN:Brighton ~$ python</span><br><span class="line">Python 2.7.14 (default, Oct 22 2017, 15:36:48) </span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin</span><br><span class="line">Type "help", "copyright", "credits" or "license" for more information.</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; import sys</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; help(sys)</span><br><span class="line"><span class="meta">#</span>help on built-in module sys:</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span>NAME</span><br><span class="line"><span class="meta">#</span>    sys</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span>FILE</span><br><span class="line"><span class="meta">#</span>    (built-in)</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span>MODULE DOCS</span><br><span class="line"><span class="meta">#</span>    https://docs.python.org/library/sys</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span>DESCRIPTION</span><br><span class="line"><span class="meta">#</span>    This module provides access to some objects used or maintained by the</span><br><span class="line"><span class="meta">#</span>    interpreter and to functions that interact strongly with the interpreter.</span><br><span class="line"><span class="meta">#</span>    ...</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; dir(sys)</span><br><span class="line">['__displayhook__', '__doc__', '__excepthook__', '__name__', '__package__', '__stderr__', '__stdin__', '__stdout__', '_clear_type_cache', '_current_frames', '_getframe', '_git', 'api_version', 'argv', 'builtin_module_names', 'byteorder', 'call_tracing', 'callstats', 'copyright', 'displayhook', 'dont_write_bytecode', 'exc_clear', 'exc_info', 'exc_type', 'excepthook', 'exec_prefix', 'executable', 'exit', 'flags', 'float_info', 'float_repr_style', 'getcheckinterval', 'getdefaultencoding', 'getdlopenflags', 'getfilesystemencoding', 'getprofile', 'getrecursionlimit', 'getrefcount', 'getsizeof', 'gettrace', 'hexversion', 'long_info', 'maxint', 'maxsize', 'maxunicode', 'meta_path', 'modules', 'path', 'path_hooks', 'path_importer_cache', 'platform', 'prefix', 'ps1', 'ps2', 'py3kwarning', 'setcheckinterval', 'setdlopenflags', 'setprofile', 'setrecursionlimit', 'settrace', 'stderr', 'stdin', 'stdout', 'subversion', 'version', 'version_info', 'warnoptions']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; quit()</span><br><span class="line">SWAN:Brighton ~$</span><br></pre></td></tr></table></figure>
<h1 id="strings">Strings</h1>
<p>Python中有个名为“str”的内建字符串类型。字符串常量可以使用单引号或双引号包括——单引号使用更多一些。反斜杠在单引号和双引号都可以转义。双引号中可以直接包含单引号（如 “I didn’t do it”），就像单引号也可以直接包含双引号一样。一个字符串常量可以分为多行，但每行行尾需要有反斜杠。三重引号，&quot;&quot;&quot;或’’’，可以方便的实现多行文本。</p>
<p>Python字符串是不可变的，即创建之后不可更改。因为字符串不可改变，当我们计算值是构建了一个新的字符串。</p>
<p>字符串中的字符可以用[]访问，序列从0开始。序列越界，Python会报错。</p>
<p>'+'不会自动将数字或其他类型转换为字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pi = <span class="number">3.14</span></span><br><span class="line"><span class="comment">##text = 'The value of pi is ' + pi      ## NO, does not work</span></span><br><span class="line">text = <span class="string">'The value of pi is '</span>  + str(pi)  <span class="comment">## yes</span></span><br></pre></td></tr></table></figure>
<p>对于数字，标准运算符，+，/，*正常工作。没有++，但+=，-=有效。对于整数除法，最好使用两个斜线，如6//5是1。</p>
<p>The “print” operator prints out one or more python items followed by a newline (leave a trailing comma at the end of the items to inhibit the newline).</p>
<p>“raw”字符串常量是以‘r’开头的，后续字符中的反斜杠不再特殊处理。所以<code>r'x\nx'</code>值就是4个字符的 ‘x\nx’. ’u‘前缀则表示unicode字符串常量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">raw = <span class="string">r'this\t\n and that'</span></span><br><span class="line"><span class="keyword">print</span> raw     <span class="comment">## this\t\n and that</span></span><br><span class="line">  </span><br><span class="line">multi = <span class="string">"""It was the best of times.</span></span><br><span class="line"><span class="string">It was the worst of times."""</span></span><br></pre></td></tr></table></figure>
<h2 id="字符串方法">字符串方法</h2>
<p>如下是最常用的字符串方法：</p>
<ul>
<li>s.lower(), s.upper() – returns the lowercase or uppercase version of the string</li>
<li>s.strip() – returns a string with whitespace removed <u>from the start and end</u></li>
<li>s.isalpha()/s.isdigit()/s.isspace()… – tests if all the string chars are in the various character classes</li>
<li>s.startswith(‘other’), s.endswith(‘other’) – tests if the string starts or ends with the given other string</li>
<li>s.find(‘other’) – searches for the given other string (not a regular expression) within s, and returns the first index where it begins or -1 if not found</li>
<li>s.replace(‘old’, ‘new’) – returns a string where all occurrences of ‘old’ have been replaced by ‘new’</li>
<li>s.split(‘delim’) – returns a list of substrings separated by the given delimiter. The delimiter is not a regular expression, it’s just text. ‘aaa,bbb,ccc’.split(’,’) -&gt; [‘aaa’, ‘bbb’, ‘ccc’]. As a convenient special case s.split() (with no arguments) splits on all whitespace chars.</li>
<li>s.join(list) – opposite of split(), joins the elements in the given list together using the string as the delimiter. e.g. ‘—’.join([‘aaa’, ‘bbb’, ‘ccc’]) -&gt; aaa—bbb—ccc</li>
</ul>
<p>Python没有单独的character类型。如s[8]返回一个string length为1的字符串包含一个元素，且运算符==, &lt;=, …都可以正常工作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">'hello world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">'hello world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">3</span>]</span><br><span class="line"><span class="string">'l'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(a)</span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(a[<span class="number">3</span>])</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">3</span>] == a[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="字符串分片">字符串分片</h2>
<p>分片（slice）可以方便地获取到序列（如字符串strings和列表lists）的一部分。分片<code>s[start:end]</code>包含从索引start开始，直到但不包括索引end的所有元素。</p>
<p>标准的基于0的索引序列可以轻松获取字符串开头附近的字符。Python使用负数来获取结尾处的字符。s[-1]是最后一个字符，s[-2]是倒数第二个字符。</p>
<p>对于任何索引，甚至是负数或越界，都会有<code>s[:n] + s[n:] == s</code>。</p>
<h2 id="字符串">字符串%</h2>
<p>Python有类似printf()合并字符串功能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># % operator</span></span><br><span class="line">text = <span class="string">"%d little pigs come out or I'll %s and %s and %s"</span> % (<span class="number">3</span>, <span class="string">'huff'</span>, <span class="string">'puff'</span>, <span class="string">'blow down'</span>)</span><br></pre></td></tr></table></figure>
<p>运算符%左边引号里面的%*是占位符，与C类似： %d int, %s string, %f/%g floating point。而右边元组tupe里面是匹配的值。</p>
<p>不同与其他语言，我们不能在%后换行——因为Python默认将每一行作为独立的指令。我们可以将完整的语句包含在括号中来解决这一问题——(), [], {}都可以。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add parens to make the long-line work:</span></span><br><span class="line">text = (<span class="string">"%d little pigs come out or I'll %s and %s and %s"</span> %</span><br><span class="line">  (<span class="number">3</span>, <span class="string">'huff'</span>, <span class="string">'puff'</span>, <span class="string">'blow down'</span>))</span><br></pre></td></tr></table></figure>
<h2 id="i18n-strings-unicode">i18n Strings (Unicode)</h2>
<p>普通的Python字符串不是unicode的，只是普通的字节。用‘u’前缀创建unicode字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; ustring = <span class="string">u'A unicode \u018e string \xf1'</span></span><br><span class="line">&gt; ustring</span><br><span class="line"><span class="string">u'A unicode \u018e string \xf1'</span></span><br></pre></td></tr></table></figure>
<p>unicode string是不同与普通str的类型，但是兼容的。</p>
<p>使用<code>ustring.encode('utf-8')</code>将unicode字符串转为utf-8编码。而unicode(s, encoding) 函数将 plain bytes 转化为 unicode string:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## (ustring from above contains a unicode string)</span></span><br><span class="line">&gt; s = ustring.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">&gt; s</span><br><span class="line"><span class="string">'A unicode \xc6\x8e string \xc3\xb1'</span>  <span class="comment">## bytes of utf-8 encoding</span></span><br><span class="line">&gt; t = unicode(s, <span class="string">'utf-8'</span>)             <span class="comment">## Convert bytes back to a unicode string</span></span><br><span class="line">&gt; t == ustring                      <span class="comment">## It's the same as the original, yay!</span></span><br><span class="line"><span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="if语句">if语句</h2>
<p>Python不使用{}来封闭if、循环和函数，而是使用分号和缩进空格来组织语句。if的条件判断不必放在括号里，还有elif和else语句。</p>
<p>任何值都可以作为if判断。所有的零值都作为false：None，0，空字符串，空列表，空字典。当然也有Boolean类型。也支持比较运算符： ==, !=, &lt;, &lt;=, &gt;, &gt;=。逻辑运算符直接使用单词<code>and</code>, <code>or</code>, <code>not</code>，而不是 C-style &amp;&amp; || !。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> speed &gt;= <span class="number">80</span>:</span><br><span class="line">  <span class="keyword">print</span> <span class="string">'License and registration please'</span></span><br><span class="line">  <span class="keyword">if</span> mood == <span class="string">'terrible'</span> <span class="keyword">or</span> speed &gt;= <span class="number">100</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'You have the right to remain silent.'</span></span><br><span class="line">  <span class="keyword">elif</span> mood == <span class="string">'bad'</span> <span class="keyword">or</span> speed &gt;= <span class="number">90</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"I'm going to have to write you a ticket."</span></span><br><span class="line">    write_ticket()</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Let's try to keep it under 80 ok?"</span></span><br></pre></td></tr></table></figure>
<p>如果代码很短，代码可以直接放在分号后而不换号。</p>
<h1 id="list列表">List列表</h1>
<p>Python有一个内建的列表类型名为list。List产量用方括号[]初始化。与字符串类似，list也支持len()函数，用中括号获取数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">colors = [<span class="string">'red'</span>, <span class="string">'blue'</span>, <span class="string">'green'</span>]</span><br><span class="line"><span class="keyword">print</span> colors[<span class="number">0</span>]    <span class="comment">## red</span></span><br><span class="line"><span class="keyword">print</span> colors[<span class="number">2</span>]    <span class="comment">## green</span></span><br><span class="line"><span class="keyword">print</span> len(colors)  <span class="comment">## 3</span></span><br></pre></td></tr></table></figure>
<p>用等号=赋值list并不会拷贝list，而是让两个变量指向内存里的同一个list。若想拷贝list，需要拷贝所有使用<code>dst = src[:]</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">SWAN:Brighton ~$ python</span><br><span class="line">Python 2.7.14 (default, Oct 22 2017, 15:36:48) </span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.38)] on darwin</span><br><span class="line">Type "help", "copyright", "credits" or "license" for more information.</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a = [1, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a</span><br><span class="line">[1, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b = a</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b</span><br><span class="line">[1, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a[0] = 10</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a</span><br><span class="line">[10, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b</span><br><span class="line">[10, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; </span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c = a[:]</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c</span><br><span class="line">[10, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a[0] = 100</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; a</span><br><span class="line">[100, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; b</span><br><span class="line">[100, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt; c</span><br><span class="line">[10, 2, 3, 'b']</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>空list是一对空的中括号[]。‘+’可以组合两个list，[1, 2] + [3, 4]生成[1, 2, 3, 4]。</p>
<h2 id="for与in">FOR与IN</h2>
<p>python中for结构<code>for var in list</code>是一种简单的遍历list（或其他组合）元素的方法。在遍历期间不要增减list。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">squares = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>]</span><br><span class="line">sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> squares:</span><br><span class="line">  sum += num</span><br><span class="line"><span class="keyword">print</span> sum  <span class="comment">## 30</span></span><br></pre></td></tr></table></figure>
<p>in结构<code>value in collection</code>可以测试value是否在collection中，返回True或False。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'larry'</span>, <span class="string">'curly'</span>, <span class="string">'moe'</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="string">'curly'</span> <span class="keyword">in</span> list:</span><br><span class="line">  <span class="keyword">print</span> <span class="string">'yay'</span></span><br></pre></td></tr></table></figure>
<p>for/in亦可用于字符串——字符串似一个字符列表——<code>for ch in s: print ch</code>输出字符串中所有字符。</p>
<p><strong>Range</strong></p>
<p>range(n)函数产生数字0, 1, … n-1，而range(a, b)返回a, a+1, …b-1。for循环和range()结合即可构建循环中的数字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## print the numbers from 0 through 99</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">  <span class="keyword">print</span> i</span><br></pre></td></tr></table></figure>
<p><strong>while循环</strong></p>
<p>python也有标准的while循环，break和continue语句。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Access every 3rd element in a list</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> i &lt; len(a):</span><br><span class="line">  <span class="keyword">print</span> a[i]</span><br><span class="line">  i = i + <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p><strong>循环else</strong></p>
<p>在循环体后面添加else分句，如果循环主体中没有执行break语句，则执行else后面的语句。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &lt;target&gt; <span class="keyword">in</span> &lt;object&gt;</span><br><span class="line">    &lt;statements&gt;</span><br><span class="line">    <span class="keyword">if</span> &lt;test&gt;: <span class="keyword">break</span>    <span class="comment">#Exit loop now, skip else</span></span><br><span class="line">    <span class="keyword">if</span> &lt;test&gt;: <span class="keyword">continue</span>   <span class="comment">#Go to the top of loop now</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    &lt;statements&gt;    <span class="comment">#if we didn't hit a break</span></span><br></pre></td></tr></table></figure>
<p><strong>List方法</strong></p>
<p>List常用方法：</p>
<ul>
<li>list.append(elem) – adds a single element to the end of the list. <u>Common error: does not return the new list, just modifies the original.</u></li>
<li>list.insert(index, elem) – inserts the element at the given index, shifting elements to the right.</li>
<li>list.extend(list2) adds the elements in list2 to the end of the list. Using + or += on a list is similar to using extend().</li>
<li>list.index(elem) – searches for the given element from the start of the list and returns its index. Throws a ValueError if the element does not appear (use “in” to check without a ValueError).</li>
<li>list.remove(elem) – searches for the first instance of the given element and removes it (throws ValueError if not present)</li>
<li>list.sort() – sorts the list in place (does not return it). (The sorted() function shown later is preferred.)</li>
<li>list.reverse() – reverses the list in place (does not return it)</li>
<li>list.pop(index) – removes and returns the element at the given index. Returns the rightmost element if index is omitted (roughly the opposite of append()).</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'larry'</span>, <span class="string">'curly'</span>, <span class="string">'moe'</span>]</span><br><span class="line">list.append(<span class="string">'shemp'</span>)         <span class="comment">## append elem at end</span></span><br><span class="line">list.insert(<span class="number">0</span>, <span class="string">'xxx'</span>)        <span class="comment">## insert elem at index 0</span></span><br><span class="line">list.extend([<span class="string">'yyy'</span>, <span class="string">'zzz'</span>])  <span class="comment">## add list of elems at end</span></span><br><span class="line"><span class="keyword">print</span> list  <span class="comment">## ['xxx', 'larry', 'curly', 'moe', 'shemp', 'yyy', 'zzz']</span></span><br><span class="line"><span class="keyword">print</span> list.index(<span class="string">'curly'</span>)    <span class="comment">## 2</span></span><br><span class="line"></span><br><span class="line">list.remove(<span class="string">'curly'</span>)         <span class="comment">## search and remove that element</span></span><br><span class="line">list.pop(<span class="number">1</span>)                  <span class="comment">## removes and returns 'larry'</span></span><br><span class="line"><span class="keyword">print</span> list  <span class="comment">## ['xxx', 'moe', 'shemp', 'yyy', 'zzz']</span></span><br></pre></td></tr></table></figure>
<p><strong>List构建</strong></p>
<p>通常先创建一个空list，然后用append() 或 extend() 添加元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list = []          <span class="comment">## Start as the empty list</span></span><br><span class="line">list.append(<span class="string">'a'</span>)   <span class="comment">## Use append() to add elements</span></span><br><span class="line">list.append(<span class="string">'b'</span>)</span><br></pre></td></tr></table></figure>
<p><strong>List分片</strong></p>
<p>与String一样，list也支持分片。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line"><span class="keyword">print</span> list[<span class="number">1</span>:<span class="number">-1</span>]   <span class="comment">## ['b', 'c']</span></span><br><span class="line">list[<span class="number">0</span>:<span class="number">2</span>] = <span class="string">'z'</span>    <span class="comment">## replace ['a', 'b'] with ['z']</span></span><br><span class="line"><span class="keyword">print</span> list         <span class="comment">## ['z', 'c', 'd']</span></span><br></pre></td></tr></table></figure>
<h1 id="排序">排序</h1>
<p>最简单的排序方式是sorted(list)函数。该函数接受list作为入参，返回一个新的排序后的list——原始list不会改变。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">5</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">print</span> sorted(a)  <span class="comment">## [1, 3, 4, 5]</span></span><br><span class="line"><span class="keyword">print</span> a  <span class="comment">## [5, 1, 4, 3]</span></span><br></pre></td></tr></table></figure>
<p>实际上sorted()函数可以接受任何可迭代的类型。</p>
<p>sorted()函数可以通过可选参数自定义排序，如参数reverse=True，<code>sorted(list, reverse=True)</code>，返回逆序。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">strs = [<span class="string">'aa'</span>, <span class="string">'BB'</span>, <span class="string">'zz'</span>, <span class="string">'CC'</span>]</span><br><span class="line"><span class="keyword">print</span> sorted(strs)  <span class="comment">## ['BB', 'CC', 'aa', 'zz'] (case sensitive)</span></span><br><span class="line"><span class="keyword">print</span> sorted(strs, reverse=<span class="keyword">True</span>)   <span class="comment">## ['zz', 'aa', 'CC', 'BB']</span></span><br></pre></td></tr></table></figure>
<h2 id="key自定义排序">key=自定义排序</h2>
<p>sorted()函数通过可选参数“key=”可定义一函数将每个元素在比较前做一转换。key函数接受一值为参并返回一值，返回的值用于比较排序。</p>
<p>例如，一个字符串list，指定key=len（内建的len()函数）按字符串长短排序。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">strs = [<span class="string">'ccc'</span>, <span class="string">'aaaa'</span>, <span class="string">'d'</span>, <span class="string">'bb'</span>]</span><br><span class="line"><span class="keyword">print</span> sorted(strs, key=len)  <span class="comment">## ['d', 'bb', 'ccc', 'aaaa']</span></span><br></pre></td></tr></table></figure>
<p>也可以自定义key函数，如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Say we have a list of strings we want to sort by the last letter of the string.</span></span><br><span class="line">strs = [<span class="string">'xc'</span>, <span class="string">'zb'</span>, <span class="string">'yd'</span> ,<span class="string">'wa'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">## Write a little function that takes a string, and returns its last letter.</span></span><br><span class="line"><span class="comment">## This will be the key function (takes in 1 value, returns 1 value).</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MyFn</span><span class="params">(s)</span>:</span></span><br><span class="line">  <span class="keyword">return</span> s[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">## Now pass key=MyFn to sorted() to sort by the last letter:</span></span><br><span class="line"><span class="keyword">print</span> sorted(strs, key=MyFn)  <span class="comment">## ['wa', 'zb', 'xc', 'yd']</span></span><br></pre></td></tr></table></figure>
<p>sorted()函数还有一个可选参数&quot;cmp=cmpFn&quot;来指定比较函数——该函数从list中取两元素比较，并返回正负或零来指示序列。</p>
<h2 id="sort方法">sort()方法</h2>
<p>与sorted()相似，list的sort()方法可将list排序。<u>sort()方法直接修改list而返回None</u>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alist.sort()            <span class="comment">## correct</span></span><br><span class="line">alist = blist.sort()    <span class="comment">## NO incorrect, sort() returns None</span></span><br></pre></td></tr></table></figure>
<h2 id="tuples元组">Tuples元组</h2>
<p>元组是一组固定大小的元素，如(x, y)坐标系。元组与列表一样，除了不能修改大小且不可修改。元组并不是严格不可更改——元组中可能包含可以修改的元素，如list。元组在Python中充当了结构体的角色。</p>
<p>若要创建元组，只需将元素列在括号内，并用逗号分开。空括号即会创建一个空元组。与list一样，元组支持len(), [], for, in…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="string">'hi'</span>)</span><br><span class="line"><span class="keyword">print</span> len(tuple)  <span class="comment">## 3</span></span><br><span class="line"><span class="keyword">print</span> tuple[<span class="number">2</span>]    <span class="comment">## hi</span></span><br><span class="line">tuple[<span class="number">2</span>] = <span class="string">'bye'</span>  <span class="comment">## NO, tuples cannot be changed</span></span><br><span class="line">tuple = (<span class="number">1</span>, <span class="number">2</span>, <span class="string">'bye'</span>)  <span class="comment">## this works</span></span><br></pre></td></tr></table></figure>
<p>若要创建size为1的元组，单独元素必须后跟一个逗号。该逗号将元组与括号其他语法分开。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tuple = (<span class="string">'hi'</span>,)   <span class="comment">## size-1 tuple</span></span><br></pre></td></tr></table></figure>
<p>在某些场景下，括号可以忽略，Python可以从逗号推出类型为元组。</p>
<p>若将一元组赋值给相同大小的变量元组，会将值赋给相应变量。若长度不等，则会报错。list也支持该特性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(x, y, z) = (<span class="number">42</span>, <span class="number">13</span>, <span class="string">"hike"</span>)</span><br><span class="line"><span class="keyword">print</span> z  <span class="comment">## hike</span></span><br><span class="line">(err_string, err_code) = Foo()  <span class="comment">## Foo() returns a length-2 tuple</span></span><br></pre></td></tr></table></figure>
<h2 id="list-comprehensions">List Comprehensions</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">squares = [ n * n <span class="keyword">for</span> n <span class="keyword">in</span> nums ]   <span class="comment">## [1, 4, 9, 16]</span></span><br><span class="line"></span><br><span class="line">strs = [<span class="string">'hello'</span>, <span class="string">'and'</span>, <span class="string">'goodbye'</span>]</span><br><span class="line">shouting = [ s.upper() + <span class="string">'!!!'</span> <span class="keyword">for</span> s <span class="keyword">in</span> strs ]</span><br><span class="line"><span class="comment">## ['HELLO!!!', 'AND!!!', 'GOODBYE!!!']</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">## Select values &lt;= 2</span></span><br><span class="line">nums = [<span class="number">2</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">6</span>]</span><br><span class="line">small = [ n <span class="keyword">for</span> n <span class="keyword">in</span> nums <span class="keyword">if</span> n &lt;= <span class="number">2</span> ]  <span class="comment">## [2, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Select fruits containing 'a', change to upper case</span></span><br><span class="line">fruits = [<span class="string">'apple'</span>, <span class="string">'cherry'</span>, <span class="string">'banana'</span>, <span class="string">'lemon'</span>]</span><br><span class="line">afruits = [ s.upper() <span class="keyword">for</span> s <span class="keyword">in</span> fruits <span class="keyword">if</span> <span class="string">'a'</span> <span class="keyword">in</span> s ]</span><br><span class="line"><span class="comment">## ['APPLE', 'BANANA']</span></span><br></pre></td></tr></table></figure>
<h1 id="字典与文件">字典与文件</h1>
<p>Python中高效的key/value哈希表结构叫字典Dict。字典内容可以写成大括号中一连串的key:value对。空字典即是一对空的大括号。</p>
<p>字符串、数字和元组皆可做key，任何类型都可做value。可以用key作索引用中括号获取value。若不存在，则抛出KeyError。可以用in判断key是否存在。dict.get(key) 可返回对应value，若key不存在，则返回None。而get(key, not-found)还支持指定不存在时的返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Can build up a dict by starting with the the empty dict &#123;&#125;</span></span><br><span class="line"><span class="comment">## and storing key/value pairs into the dict like this:</span></span><br><span class="line"><span class="comment">## dict[key] = value-for-that-key</span></span><br><span class="line">dict = &#123;&#125;</span><br><span class="line">dict[<span class="string">'a'</span>] = <span class="string">'alpha'</span></span><br><span class="line">dict[<span class="string">'g'</span>] = <span class="string">'gamma'</span></span><br><span class="line">dict[<span class="string">'o'</span>] = <span class="string">'omega'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> dict  <span class="comment">## &#123;'a': 'alpha', 'o': 'omega', 'g': 'gamma'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> dict[<span class="string">'a'</span>]     <span class="comment">## Simple lookup, returns 'alpha'</span></span><br><span class="line">dict[<span class="string">'a'</span>] = <span class="number">6</span>       <span class="comment">## Put new key/value into dict</span></span><br><span class="line"><span class="string">'a'</span> <span class="keyword">in</span> dict         <span class="comment">## True</span></span><br><span class="line"><span class="comment">## print dict['z']                  ## Throws KeyError</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">'z'</span> <span class="keyword">in</span> dict: <span class="keyword">print</span> dict[<span class="string">'z'</span>]     <span class="comment">## Avoid KeyError</span></span><br><span class="line"><span class="keyword">print</span> dict.get(<span class="string">'z'</span>)  <span class="comment">## None (instead of KeyError)</span></span><br></pre></td></tr></table></figure>
<p>字典的递归循环默认以Key为任意序。dict.keys() 和 dict.values() 返回 lists of the keys 或 values. 还有 items() 返回 a list of (key, value) tuples。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## By default, iterating over a dict iterates over its keys.</span></span><br><span class="line"><span class="comment">## Note that the keys are in a random order.</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> dict: <span class="keyword">print</span> key</span><br><span class="line"><span class="comment">## prints a g o</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Exactly the same as above</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> dict.keys(): <span class="keyword">print</span> key</span><br><span class="line"></span><br><span class="line"><span class="comment">## Get the .keys() list:</span></span><br><span class="line"><span class="keyword">print</span> dict.keys()  <span class="comment">## ['a', 'o', 'g']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Likewise, there's a .values() list of values</span></span><br><span class="line"><span class="keyword">print</span> dict.values()  <span class="comment">## ['alpha', 'omega', 'gamma']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Common case -- loop over the keys in sorted order,</span></span><br><span class="line"><span class="comment">## accessing each key/value</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> sorted(dict.keys()):</span><br><span class="line">  <span class="keyword">print</span> key, dict[key]</span><br><span class="line"></span><br><span class="line"><span class="comment">## .items() is the dict expressed as (key, value) tuples</span></span><br><span class="line"><span class="keyword">print</span> dict.items()  <span class="comment">##  [('a', 'alpha'), ('o', 'omega'), ('g', 'gamma')]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## This loop syntax accesses the whole dict by looping</span></span><br><span class="line"><span class="comment">## over the .items() tuple list, accessing one (key, value)</span></span><br><span class="line"><span class="comment">## pair on each iteration.</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> dict.items(): <span class="keyword">print</span> k, <span class="string">'&gt;'</span>, v</span><br><span class="line"><span class="comment">## a &gt; alpha    o &gt; omega     g &gt; gamma</span></span><br></pre></td></tr></table></figure>
<h2 id="字典格式化">字典格式化</h2>
<p>运算符%可以方便地通过字典名称将其值转换为字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hash = &#123;&#125;</span><br><span class="line">hash[<span class="string">'word'</span>] = <span class="string">'garfield'</span></span><br><span class="line">hash[<span class="string">'count'</span>] = <span class="number">42</span></span><br><span class="line">s = <span class="string">'I want %(count)d copies of %(word)s'</span> % hash  <span class="comment"># %d for int, %s for string</span></span><br><span class="line"><span class="comment"># 'I want 42 copies of garfield'</span></span><br></pre></td></tr></table></figure>
<h2 id="del">Del</h2>
<p>运算符“del”可以用来移除变量定义，也可以用来删除list元素或分片，以及字典实体。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var = <span class="number">6</span></span><br><span class="line"><span class="keyword">del</span> var  <span class="comment"># var no more!</span></span><br><span class="line"></span><br><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line"><span class="keyword">del</span> list[<span class="number">0</span>]     <span class="comment">## Delete first element</span></span><br><span class="line"><span class="keyword">del</span> list[<span class="number">-2</span>:]   <span class="comment">## Delete last two elements</span></span><br><span class="line"><span class="keyword">print</span> list      <span class="comment">## ['b']</span></span><br><span class="line"></span><br><span class="line">dict = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>, <span class="string">'c'</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">del</span> dict[<span class="string">'b'</span>]   <span class="comment">## Delete 'b' entry</span></span><br><span class="line"><span class="keyword">print</span> dict      <span class="comment">## &#123;'a':1, 'c':3&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="文件">文件</h2>
<p>open()函数打开文件并返回句柄。如<code>f = open('name', 'r')</code>打开文件，句柄保存到变量f，备读操作，操作完成之后调用f.close()关闭文件。参数‘r’为读，‘w’为写，‘a’为追加。还有模式‘rU’，‘U’即‘Universal’，适用于文本文件，该模式可智能处理各种换行符，而作为简单的‘\n’。The special mode ‘rU’ is the “Universal” option for text files where it’s smart about converting different line-endings so they always come through as a simple ‘\n’.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Echo the contents of a file</span></span><br><span class="line">f = open(<span class="string">'foo.txt'</span>, <span class="string">'rU'</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:   <span class="comment">## iterates over the lines of the file</span></span><br><span class="line">  <span class="keyword">print</span> line,    <span class="comment">## trailing , so print does not add an end-of-line char</span></span><br><span class="line">                 <span class="comment">## since 'line' already includes the end-of line.</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>f.readline()读取整个文件，返回一list包含文件行内容。</p>
<p>f.read()读取整个文件到一字符串。</p>
<p>f.write(string) 可写。写文件也可用print函数，不过语法奇怪：“print &gt;&gt; f, string”。在Python 3中，语法变正常点了：“print(string, file=f)”。</p>
<h2 id="unicode文件">Unicode文件</h2>
<p>codecs模块可支持读取unicode文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"></span><br><span class="line">f = codecs.open(<span class="string">'foo.txt'</span>, <span class="string">'rU'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">  <span class="comment"># here line is a *unicode* string</span></span><br></pre></td></tr></table></figure>
<p>对于写，只能使用 f.write()。因为print不能完全支持unicode。</p>
<h1 id="python正则表达式">Python正则表达式</h1>
<p>Python中“re”模块提供正则表达式支持。Python中正则搜索一般写作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'an example word:cat!!'</span></span><br><span class="line">match = re.search(<span class="string">r'word:\w\w\w'</span>, str)</span><br><span class="line"><span class="comment"># If-statement after search() tests if it succeeded</span></span><br><span class="line"><span class="keyword">if</span> match:</span><br><span class="line">  <span class="keyword">print</span> <span class="string">'found'</span>, match.group() <span class="comment">## 'found word:cat'</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="keyword">print</span> <span class="string">'did not find'</span></span><br></pre></td></tr></table></figure>
<h2 id="基本模式">基本模式</h2>
<p>常用的匹配单个字符的常用基本模式：</p>
<ul>
<li>a, X, 9, &lt; – ordinary characters just match themselves exactly. The meta-characters which do not match themselves because they have special meanings are: . ^ $ * + ? { [ ] \ | ( ) (details below)</li>
<li>. (a period) – matches any single character except newline ‘\n’</li>
<li>\w – (lowercase w) matches a “word” character: a letter or digit or underbar [a-zA-Z0-9_]. Note that although “word” is the mnemonic for this, it only matches a single word char, not a whole word. \W (upper case W) matches any non-word character.</li>
<li>\b – boundary between word and non-word</li>
<li>\s – (lowercase s) matches a single whitespace character – space, newline, return, tab, form [ \n\r\t\f]. \S (upper case S) matches any non-whitespace character.</li>
<li>\t, \n, \r – tab, newline, return</li>
<li>\d – decimal digit [0-9] (some older regex utilities do not support but \d, but they all support \w and \s)</li>
<li>^ = start, $ = end – match the start or end of the string</li>
<li>\ – inhibit the “specialness” of a character. So, for example, use . to match a period or \ to match a slash. If you are unsure if a character has special meaning, such as ‘@’, you can put a slash in front of it, @, to make sure it is treated just as a character.</li>
</ul>
<p>字符串正则搜索基本规则如下：</p>
<ul>
<li>搜索过程从头到尾，遇到第一个匹配的即停。</li>
<li>All of the pattern must be matched, but not all of the string</li>
<li>若<code>match = re.search(pat, str)</code>成功，<code>match</code> 不为 None， 且`match.group()为匹配内容。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Search for pattern 'iii' in string 'piiig'.</span></span><br><span class="line"><span class="comment">## All of the pattern must match, but it may appear anywhere.</span></span><br><span class="line"><span class="comment">## On success, match.group() is matched text.</span></span><br><span class="line">match = re.search(r'iii', 'piiig') =&gt;  found, match.group() == "iii"</span><br><span class="line">match = re.search(r'igs', 'piiig') =&gt;  not found, match == None</span><br><span class="line"></span><br><span class="line"><span class="comment">## . = any char but \n</span></span><br><span class="line">match = re.search(r'..g', 'piiig') =&gt;  found, match.group() == "iig"</span><br><span class="line"></span><br><span class="line"><span class="comment">## \d = digit char, \w = word char</span></span><br><span class="line">match = re.search(r'\d\d\d', 'p123g') =&gt;  found, match.group() == "123"</span><br><span class="line">match = re.search(r'\w\w\w', '@@abcd!!') =&gt;  found, match.group() == "abc"</span><br></pre></td></tr></table></figure>
<h2 id="重复">重复</h2>
<p>某个字符后的数量限定符用来限定前面这个字符允许出现的个数。最常见的数量限定符包括<code>+</code>、<code>?</code>和<code>*</code>（不加数量限定则代表出现一次且仅出现一次）：</p>
<ul>
<li><code>+</code>代表前面的字符必须至少出现一次。（1次或多次）。例如，<code>goo+gle</code>可以匹配google、gooogle、goooogle等;</li>
<li><code>?</code>代表前面的字符最多只可以出现一次。（0次或1次）。例如，<code>colou?r</code>可以匹配color或者colour;</li>
<li><code>*</code>代表前面的字符可以不出现，也可以出现一次或者多次。（0次、1次或多次）。例如，<code>0*42</code>可以匹配42、042、0042、00042等。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## i+ = one or more i's, as many as possible.</span></span><br><span class="line">match = re.search(r'pi+', 'piiig') =&gt;  found, match.group() == "piii"</span><br><span class="line"></span><br><span class="line"><span class="comment">## Finds the first/leftmost solution, and within it drives the +</span></span><br><span class="line"><span class="comment">## as far as possible (aka 'leftmost and largest').</span></span><br><span class="line"><span class="comment">## In this example, note that it does not get to the second set of i's.</span></span><br><span class="line">match = re.search(r'i+', 'piigiiii') =&gt;  found, match.group() == "ii"</span><br><span class="line"></span><br><span class="line"><span class="comment">## \s* = zero or more whitespace chars</span></span><br><span class="line"><span class="comment">## Here look for 3 digits, possibly separated by whitespace.</span></span><br><span class="line">match = re.search(r'\d\s*\d\s*\d', 'xx1 2   3xx') =&gt;  found, match.group() == "1 2   3"</span><br><span class="line">match = re.search(r'\d\s*\d\s*\d', 'xx12  3xx') =&gt;  found, match.group() == "12  3"</span><br><span class="line">match = re.search(r'\d\s*\d\s*\d', 'xx123xx') =&gt;  found, match.group() == "123"</span><br><span class="line"></span><br><span class="line"><span class="comment">## ^ = matches the start of string, so this fails:</span></span><br><span class="line">match = re.search(r'^b\w+', 'foobar') =&gt;  not found, match == None</span><br><span class="line"><span class="comment">## but without the ^ it succeeds:</span></span><br><span class="line">match = re.search(r'b\w+', 'foobar') =&gt;  found, match.group() == "bar"</span><br></pre></td></tr></table></figure>
<h2 id="方括号">方括号</h2>
<p>方括号可表示一字符集，如[abc]可匹配a或b或c。\w、\s等也可以在方括号中使用，但有一点，对，一点(.)在方括号中就是一点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">match = re.search(<span class="string">r'[\w.-]+@[\w.-]+'</span>, str)</span><br><span class="line"><span class="keyword">if</span> match:</span><br><span class="line">  <span class="keyword">print</span> match.group()  <span class="comment">## 'alice-b@google.com'</span></span><br></pre></td></tr></table></figure>
<p>可以在方括号中使用短横线表示范围，[a-z]可匹配所有小写字母。若要短横线不要表示范围，可以将其放到最后，如[abc-]。^在方括号的开头则表示取反，<code>[^ab]</code>意味着除a或b的其他字符。</p>
<h2 id="group-extraction">Group Extraction</h2>
<p>正则表达式的组特性可以用来获取匹配内容的各个部分。如上例，如果想分开获取邮箱的用户名和主机名，我们可以在用户名和主机名上添加圆括号：<code>r'([\w.-]+)@([\w.-]+)'</code>。如此一来，并未改变匹配的字符串，并且添加了“组”逻辑。若匹配成功，match.group(1)即是第一个括号内匹配的对应内容，match.group(2)对应第二个括号匹配的内容。而match.group()依旧是完整的匹配内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'purple alice-b@google.com monkey dishwasher'</span></span><br><span class="line">match = re.search(<span class="string">r'([\w.-]+)@([\w.-]+)'</span>, str)</span><br><span class="line"><span class="keyword">if</span> match:</span><br><span class="line">  <span class="keyword">print</span> match.group()   <span class="comment">## 'alice-b@google.com' (the whole match)</span></span><br><span class="line">  <span class="keyword">print</span> match.group(<span class="number">1</span>)  <span class="comment">## 'alice-b' (the username, group 1)</span></span><br><span class="line">  <span class="keyword">print</span> match.group(<span class="number">2</span>)  <span class="comment">## 'google.com' (the host, group 2)</span></span><br></pre></td></tr></table></figure>
<h2 id="findall">findall</h2>
<p>findall()也许是re模块中最强大的函数。上面我们使用的re.search()搜索第一个匹配的内容，而findall()搜索所有匹配并返回一个字符串列表——每一个字符串都是一个匹配的内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Suppose we have a text with many email addresses</span></span><br><span class="line">str = <span class="string">'purple alice@google.com, blah monkey bob@abc.com blah dishwasher'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Here re.findall() returns a list of all the found email strings</span></span><br><span class="line">emails = re.findall(<span class="string">r'[\w\.-]+@[\w\.-]+'</span>, str) <span class="comment">## ['alice@google.com', 'bob@abc.com']</span></span><br><span class="line"><span class="keyword">for</span> email <span class="keyword">in</span> emails:</span><br><span class="line">  <span class="comment"># do something with each found email string</span></span><br><span class="line">  <span class="keyword">print</span> email</span><br></pre></td></tr></table></figure>
<p><strong>文件搜索</strong></p>
<p>虽然可以使用循环递归获取文件每一行并对其使用findall()，但有更好的方法——使用findall()。将整个文件输入给findall()，findall返回所有匹配的内容列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Open file</span></span><br><span class="line">f = open(<span class="string">'test.txt'</span>, <span class="string">'r'</span>)</span><br><span class="line"><span class="comment"># Feed the file text into findall(); it returns a list of all the found strings</span></span><br><span class="line">strings = re.findall(<span class="string">r'some pattern'</span>, f.read())</span><br></pre></td></tr></table></figure>
<p><strong>findall与组</strong></p>
<p>圆括号组机制也可以与findall()结合使用。如果模式包含<u>两个或多个组</u>，findall不再返回字符串列表，而是返回元组列表。每个元组为一匹配内容，元组内为group(1), group(2)等内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'purple alice@google.com, blah monkey bob@abc.com blah dishwasher'</span></span><br><span class="line">tuples = re.findall(<span class="string">r'([\w\.-]+)@([\w\.-]+)'</span>, str)</span><br><span class="line"><span class="keyword">print</span> tuples  <span class="comment">## [('alice', 'google.com'), ('bob', 'abc.com')]</span></span><br><span class="line"><span class="keyword">for</span> tuple <span class="keyword">in</span> tuples:</span><br><span class="line">  <span class="keyword">print</span> tuple[<span class="number">0</span>]  <span class="comment">## username</span></span><br><span class="line">  <span class="keyword">print</span> tuple[<span class="number">1</span>]  <span class="comment">## host</span></span><br></pre></td></tr></table></figure>
<p>如果模式中包含一组圆括号，findall()返回匹配括号组的内容列表——忽略括号外匹配的内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'purple alice@google.com, blah monkey bob@abc.com blah dishwasher'</span></span><br><span class="line">list = re.findall(<span class="string">r'([\w\.-]+)@[\w\.-]+'</span>, str)</span><br><span class="line"><span class="keyword">print</span> list  <span class="comment">## ['alice', 'bob']</span></span><br></pre></td></tr></table></figure>
<p>如果模式中包含括号组，但你又不想提取匹配的内容，可以在模式开头加上<code>?:</code>.</p>
<h2 id="选项">选项</h2>
<p>re函数可以通过选项参数修改模式匹配。选项标志作为一个额外参数添加给search()或findall()函数，如re.search(pat, str, re.IGNORECASE).</p>
<ul>
<li>IGNORECASE – ignore upper/lowercase differences for matching, so ‘a’ matches both ‘a’ and ‘A’.</li>
<li>DOTALL – allow dot (.) to match newline – normally it matches anything but newline. This can trip you up – you think .* matches everything, but by default it does not go past the end of a line. Note that \s (whitespace) includes newlines, so if you want to match a run of whitespace that may include a newline, you can just use \s*</li>
<li>MULTILINE – Within a string made of many lines, allow <code>^</code> and <code>$</code> to match the start and end of each line. Normally ^/$ would just match the start and end of the whole string.。</li>
</ul>
<h2 id="贪婪模式与非贪婪">贪婪模式与非贪婪</h2>
<p>当问号<code>?</code>紧跟在任何一个其他重复修饰符（<em>,+,?，{n}，{n,}，{n,m}）后面时，匹配模式是</em><em>非</em>*贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“<code>oooo</code>”，“<code>o+?</code>”将匹配单个“<code>o</code>”，而“<code>o+</code>”将匹配所有“<code>o</code>”。</p>
<h2 id="替换">替换</h2>
<p>The re.sub(pat, replacement, str) function searches for all the instances of pattern in the given string, and replaces them. The replacement string can include ‘\1’, ‘\2’ which refer to the text from group(1), group(2), and so on from the original matching text.</p>
<p>Here’s an example which searches for all the email addresses, and changes them to keep the user (\1) but have <a href="http://yo-yo-dyne.com" target="_blank" rel="noopener">yo-yo-dyne.com</a> as the host.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">'purple alice@google.com, blah monkey bob@abc.com blah dishwasher'</span></span><br><span class="line"><span class="comment">## re.sub(pat, replacement, str) -- returns new string with all replacements,</span></span><br><span class="line"><span class="comment">## \1 is group(1), \2 group(2) in the replacement</span></span><br><span class="line"><span class="keyword">print</span> re.sub(<span class="string">r'([\w\.-]+)@([\w\.-]+)'</span>, <span class="string">r'\1@yo-yo-dyne.com'</span>, str)</span><br><span class="line"><span class="comment">## purple alice@yo-yo-dyne.com, blah monkey bob@yo-yo-dyne.com blah dishwasher</span></span><br></pre></td></tr></table></figure>
<h1 id="python-utilities">Python Utilities</h1>
<h2 id="文件系统">文件系统</h2>
<p>The <em>os</em> and <em>os.path</em> modules include many functions to interact with the file system. The <em>shutil</em> module can copy files.</p>
<ul>
<li><a href="https://docs.python.org/library/os" target="_blank" rel="noopener">os module docs</a></li>
<li>filenames = os.listdir(dir) – list of filenames in that directory path (not including . and …). The filenames are just the names in the directory, not their absolute paths.</li>
<li>os.path.join(dir, filename) – given a filename from the above list, use this to put the dir and filename together to make a path</li>
<li>os.path.abspath(path) – given a path, return an absolute form, e.g. /home/nick/foo/bar.html</li>
<li>os.path.dirname(path), os.path.basename(path) – given dir/foo/bar.html, return the dirname “dir/foo” and basename “bar.html”</li>
<li>os.path.exists(path) – true if it exists</li>
<li>os.mkdir(dir_path) – makes one dir, os.makedirs(dir_path) makes all the needed dirs in this path</li>
<li>shutil.copy(source-path, dest-path) – copy a file (dest path directories should exist)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Example pulls filenames from a dir, prints their relative and absolute paths</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printdir</span><span class="params">(dir)</span>:</span></span><br><span class="line">  filenames = os.listdir(dir)</span><br><span class="line">  <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">    <span class="keyword">print</span> filename  <span class="comment">## foo.txt</span></span><br><span class="line">    <span class="keyword">print</span> os.path.join(dir, filename) <span class="comment">## dir/foo.txt (relative to current dir)</span></span><br><span class="line">    <span class="keyword">print</span> os.path.abspath(os.path.join(dir, filename)) <span class="comment">## /home/nick/dir/foo.txt</span></span><br></pre></td></tr></table></figure>
<h2 id="命令行">命令行</h2>
<p>The <em>commands</em> module is a simple way to run an external command and capture its output.</p>
<ul>
<li><a href="https://docs.python.org/2/library/commands" target="_blank" rel="noopener">commands module docs</a></li>
<li>(status, output) = commands.getstatusoutput(cmd) – runs the command, waits for it to exit, and returns its status int and output text as a tuple. The command is run with its standard output and standard error combined into the one output text. The status will be non-zero if the command failed. Since the standard-err of the command is captured, if it fails, we need to print some indication of what happened.</li>
<li>output = commands.getoutput(cmd) – as above, but without the status int.</li>
<li>There is a commands.getstatus() but it does something else, so don’t use it – dumbest bit of method naming ever!</li>
<li>If you want more control over the running of the sub-process, see the <a href="https://docs.python.org/2/library/popen2.html" target="_blank" rel="noopener">“popen2” module</a></li>
<li>There is also a simple os.system(cmd) which runs the command and dumps its output onto your output and returns its error code. This works if you want to run the command but do not need to capture its output into your python data structures.</li>
</ul>
<p>Note: The commands module and the popen2 module are deprecated as of Python 2.6 and removed in 3.x. The <a href="https://developers.google.com/edu/python/docs.python.org/library/subprocess" target="_blank" rel="noopener">subprocess module</a> replaces these modules. In particular, the subprocess module discusses replacements for these modules in the <a href="https://developers.google.com/edu/python/docs.python.org/library/subprocess.html#subprocess-replacements" target="_blank" rel="noopener">subprocess-replacements section</a>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Given a dir path, run an external 'ls -l' on it --</span></span><br><span class="line"><span class="comment">## shows how to call an external program</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">listdir</span><span class="params">(dir)</span>:</span></span><br><span class="line">  cmd = <span class="string">'ls -l '</span> + dir</span><br><span class="line">  <span class="keyword">print</span> <span class="string">"Command to run:"</span>, cmd   <span class="comment">## good to debug cmd before actually running it</span></span><br><span class="line">  (status, output) = commands.getstatusoutput(cmd)</span><br><span class="line">  <span class="keyword">if</span> status:    <span class="comment">## Error case, print the command's output to stderr and exit</span></span><br><span class="line">    sys.stderr.write(output)</span><br><span class="line">    sys.exit(status)</span><br><span class="line">  <span class="keyword">print</span> output  <span class="comment">## Otherwise do something with the command's output</span></span><br></pre></td></tr></table></figure>
<h2 id="exceptions">Exceptions</h2>
<p>An exception represents a run-time error that halts the normal execution at a particular line and transfers control to error handling code. This section just introduces the most basic uses of exceptions. For example a run-time error might be that a variable used in the program does not have a value (ValueError … you’ve probably seen that one a few times), or a file open operation error because a file does not exist (IOError). Learn more in <a href="https://docs.python.org/tutorial/errors" target="_blank" rel="noopener">the exceptions tutorial</a> and see <a href="https://docs.python.org/library/exceptions" target="_blank" rel="noopener">the entire exception list</a>.</p>
<p>Without any error handling code (as we have done thus far), a run-time exception just halts the program with an error message. That’s a good default behavior, and you’ve seen it many times. You can add a “try/except” structure to your code to handle exceptions, like this:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  <span class="comment">## Either of these two lines could throw an IOError, say</span></span><br><span class="line">  <span class="comment">## if the file does not exist or the read() encounters a low level error.</span></span><br><span class="line">  f = open(filename, <span class="string">'rU'</span>)</span><br><span class="line">  text = f.read()</span><br><span class="line">  f.close()</span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">  <span class="comment">## Control jumps directly to here if any of the above lines throws IOError.</span></span><br><span class="line">  sys.stderr.write(<span class="string">'problem reading:'</span> + filename)</span><br><span class="line"><span class="comment">## In any case, the code then continues with the line after the try/except</span></span><br></pre></td></tr></table></figure>
<p>The try: section includes the code which might throw an exception. The except: section holds the code to run if there is an exception. If there is no exception, the except: section is skipped (that is, that code is for error handling only, not the “normal” case for the code). You can get a pointer to the exception object itself with syntax “except IOError as e: …” (e points to the exception object).</p>
<h2 id="http-urllib-and-urlparse">HTTP – urllib and urlparse</h2>
<p>The module <em>urllib</em> provides url fetching – making a url look like a file you can read from. The <em>urlparse</em> module can take apart and put together urls.</p>
<ul>
<li><a href="https://developers.google.com/edu/python/docs.python.org/library/urllib" target="_blank" rel="noopener">urllib module docs</a></li>
<li>ufile = urllib.urlopen(url) – returns a file like object for that url</li>
<li>text = ufile.read() – can read from it, like a file (readlines() etc. also work)</li>
<li>info = <a href="http://ufile.info" target="_blank" rel="noopener">ufile.info</a>() – the meta info for that request. info.gettype() is the mime type, e.g. ‘text/html’</li>
<li>baseurl = ufile.geturl() – gets the “base” url for the request, which may be different from the original because of redirects</li>
<li>urllib.urlretrieve(url, filename) – downloads the url data to the given file path</li>
<li>urlparse.urljoin(baseurl, url) – given a url that may or may not be full, and the baseurl of the page it comes from, return a full url. Use geturl() above to provide the base url.</li>
</ul>
<p>In Python 3, urllib and urllib2 are merged into urllib.request, and urlparse becomes urllib.parse. All of their exceptions are in urllib.error.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Given a url, try to retrieve it. If it's text/html,</span></span><br><span class="line"><span class="comment">## print its base url and its text.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wget</span><span class="params">(url)</span>:</span></span><br><span class="line">  ufile = urllib.urlopen(url)  <span class="comment">## get file-like object for url</span></span><br><span class="line">  info = ufile.info()   <span class="comment">## meta-info about the url content</span></span><br><span class="line">  <span class="keyword">if</span> info.gettype() == <span class="string">'text/html'</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'base url:'</span> + ufile.geturl()</span><br><span class="line">    text = ufile.read()  <span class="comment">## read all its text</span></span><br><span class="line">    <span class="keyword">print</span> text</span><br></pre></td></tr></table></figure>
<p>The above code works fine, but does not include error handling if a url does not work for some reason. Here’s a version of the function which adds try/except logic to print an error message if the url operation fails.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Version that uses try/except to print an error message if the</span></span><br><span class="line"><span class="comment">## urlopen() fails.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wget2</span><span class="params">(url)</span>:</span></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    ufile = urllib.urlopen(url)</span><br><span class="line">    <span class="keyword">if</span> ufile.info().gettype() == <span class="string">'text/html'</span>:</span><br><span class="line">      <span class="keyword">print</span> ufile.read()</span><br><span class="line">  <span class="keyword">except</span> IOError:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'problem reading url:'</span>, url</span><br></pre></td></tr></table></figure>
<h2 id=""></h2>
<p>参考资料：</p>
<p><a href="https://developers.google.com/edu/python/introduction" target="_blank" rel="noopener">Google’s Python online tutorial</a><br>
<a href="https://blog.laisky.com/p/pyenv/" target="_blank" rel="noopener">Python 的版本管理和环境隔离</a></p>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/zh/2018/how-much-time/" data-toggle="tooltip" data-placement="top" title="我还有多长时间">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/zh/2018/openssl-ca/" data-toggle="tooltip" data-placement="top" title="OpenSSL CA实践">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                    <div class="comment">
                        <div id="disqus_thread" class="disqus-thread"></div>
                    </div>
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#入门"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">入门</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#缩进"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">缩进</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#模块与命名空间"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">模块与命名空间</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#help-dir"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">help(), dir()</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#strings"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">Strings</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#字符串方法"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">字符串方法</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#字符串分片"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">字符串分片</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#字符串"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">字符串%</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#i18n-strings-unicode"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">i18n Strings (Unicode)</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#if语句"><span class="toc-nav-number">2.5.</span> <span class="toc-nav-text">if语句</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#list列表"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">List列表</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#for与in"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">FOR与IN</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#排序"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">排序</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#key自定义排序"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">key=自定义排序</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#sort方法"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">sort()方法</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#tuples元组"><span class="toc-nav-number">4.3.</span> <span class="toc-nav-text">Tuples元组</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#list-comprehensions"><span class="toc-nav-number">4.4.</span> <span class="toc-nav-text">List Comprehensions</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#字典与文件"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">字典与文件</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#字典格式化"><span class="toc-nav-number">5.1.</span> <span class="toc-nav-text">字典格式化</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#del"><span class="toc-nav-number">5.2.</span> <span class="toc-nav-text">Del</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#文件"><span class="toc-nav-number">5.3.</span> <span class="toc-nav-text">文件</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#unicode文件"><span class="toc-nav-number">5.4.</span> <span class="toc-nav-text">Unicode文件</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#python正则表达式"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">Python正则表达式</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#基本模式"><span class="toc-nav-number">6.1.</span> <span class="toc-nav-text">基本模式</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#重复"><span class="toc-nav-number">6.2.</span> <span class="toc-nav-text">重复</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#方括号"><span class="toc-nav-number">6.3.</span> <span class="toc-nav-text">方括号</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#group-extraction"><span class="toc-nav-number">6.4.</span> <span class="toc-nav-text">Group Extraction</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#findall"><span class="toc-nav-number">6.5.</span> <span class="toc-nav-text">findall</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#选项"><span class="toc-nav-number">6.6.</span> <span class="toc-nav-text">选项</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#贪婪模式与非贪婪"><span class="toc-nav-number">6.7.</span> <span class="toc-nav-text">贪婪模式与非贪婪</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#替换"><span class="toc-nav-number">6.8.</span> <span class="toc-nav-text">替换</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#python-utilities"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">Python Utilities</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#文件系统"><span class="toc-nav-number">7.1.</span> <span class="toc-nav-text">文件系统</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#命令行"><span class="toc-nav-number">7.2.</span> <span class="toc-nav-text">命令行</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#exceptions"><span class="toc-nav-number">7.3.</span> <span class="toc-nav-text">Exceptions</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#http-urllib-and-urlparse"><span class="toc-nav-number">7.4.</span> <span class="toc-nav-text">HTTP – urllib and urlparse</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#"><span class="toc-nav-number">7.5.</span> <span class="toc-nav-text"></span></a></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Python" title="Python">Python</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>




<!-- disqus embedded js code start (one page only need to embed once) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "brightonzhang-com";
    var disqus_identifier = "https://brightonzhang.com/zh/2018/python-notes/";
    var disqus_url = "https://brightonzhang.com/zh/2018/python-notes/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus embedded js code start end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/brightonzhang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                

                

                

                
                    <li>
                        <a target="_blank" href="https://github.com/brightonzhang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Brighton Zhang 2019 
                    <br>
                    Powered by <a href="https://hexo.io/">Hexo</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    Theme from <a href="https://huangxuan.me">Hux</a>, <a href="http://beantech.org">BeanTech</a> and <a href="https://brightonzhang.com">Brighton</a>  
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://brightonzhang.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-114837917-1';
    var _gaDomain = 'auto';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://brightonzhang.com/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
